<mvc:View
  controllerName="coffee-frontend.controller.Admin"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:viz="sap.viz.ui5.controls"
  xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:core="sap.ui.core"   
  displayBlock="true">

  <Page title="Admin Dashboard">
    <content>
      <VBox class="adminContainer" width="100%" alignItems="Stretch" justifyContent="Start">

        <!-- 🔍 Filter section -->
        <HBox class="filterRow" justifyContent="End" width="100%">
          <Select id="monthSelect" width="200px" change=".onMonthFilterChange">
            <items>
              <core:Item key="1" text="January"/>
              <core:Item key="2" text="February"/>
              <core:Item key="3" text="March"/>
              <core:Item key="4" text="April"/>
              <core:Item key="5" text="May"/>
              <core:Item key="6" text="June"/>
              <core:Item key="7" text="July"/>
              <core:Item key="8" text="August"/>
              <core:Item key="9" text="September"/>
              <core:Item key="10" text="October"/>
              <core:Item key="11" text="November"/>
              <core:Item key="12" text="December"/>
            </items>
          </Select>
        </HBox>

        <!-- 📊 KPI: Consumption by choice -->
        <viz:VizFrame id="consumptionChart" height="300px" width="100%" vizType="donut">
          <viz:dataset>
            <viz.data:FlattenedDataset xmlns:viz.data="sap.viz.ui5.data"
              data="{adminModel>/consumption}">
              <viz.data:dimensions>
                <viz.data:DimensionDefinition name="Choice" value="{adminModel>choice}"/>
              </viz.data:dimensions>
              <viz.data:measures>
                <viz.data:MeasureDefinition name="Cups" value="{adminModel>count}"/>
              </viz.data:measures>
            </viz.data:FlattenedDataset>
          </viz:dataset>
          <viz:feeds>
            <viz.feeds:FeedItem uid="size" type="Measure" values="Cups"/>
            <viz.feeds:FeedItem uid="color" type="Dimension" values="Choice"/>
          </viz:feeds>
        </viz:VizFrame>

        <!-- 📈 KPI: Coffee Orders by Week -->
        <viz:VizFrame id="ordersByWeekChart" height="300px" width="100%" vizType="column">
          <viz:dataset>
            <viz.data:FlattenedDataset xmlns:viz.data="sap.viz.ui5.data"
              data="{adminModel>/ordersByWeek}">
              <viz.data:dimensions>
                <viz.data:DimensionDefinition name="Week" value="{adminModel>week}"/>
              </viz.data:dimensions>
              <viz.data:measures>
                <viz.data:MeasureDefinition name="Orders" value="{adminModel>count}"/>
              </viz.data:measures>
            </viz.data:FlattenedDataset>
          </viz:dataset>
          <viz:feeds>
            <viz.feeds:FeedItem uid="valueAxis" type="Measure" values="Orders"/>
            <viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="Week"/>
          </viz:feeds>
        </viz:VizFrame>

        <!-- 📜 Table: Coffee Order Items -->
        <Table id="orderTable" items="{adminModel>/orderItems}" growing="true" growingScrollToLoad="true">
          <headerToolbar>
            <Toolbar>
              <Title text="Coffee Orders"/>
            </Toolbar>
          </headerToolbar>
          <columns>
            <Column><Text text="Order ID"/></Column>
            <Column><Text text="Timestamp"/></Column>
            <Column><Text text="Choice"/></Column>
            <Column><Text text="Amount (€)"/></Column>
          </columns>
          <items>
            <ColumnListItem>
              <cells>
                <Text text="{adminModel>orderId}"/>
                <Text text="{adminModel>timestamp}"/>
                <Text text="{adminModel>choice}"/>
                <Text text="{adminModel>amount}"/>
              </cells>
            </ColumnListItem>
          </items>
        </Table>

      </VBox>
    </content>
  </Page>
</mvc:View>
